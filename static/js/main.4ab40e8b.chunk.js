(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{105:function(e,t,a){e.exports={header:"Header_header__1s2iZ",logo:"Header_logo__1LM3x"}},115:function(e,t,a){},116:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),c=a(50),n=a.n(c),i=(a(115),a(116),a(105)),o=a.n(i),u=a.p+"static/media/logo.3dc88ffd.svg",l=a(23),j=a(1),m=function(){return Object(j.jsx)("div",{className:o.a.header,children:Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)("div",{className:"logo",children:Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:u,alt:"logo"})})})})})},f=a(34),p=a(21),d=a.n(p),b=a(12),v=a(33),O=a(8),h=a(9),x=a(16),N=a(241),_=a(240),g=a(6),y=a.n(g),S=a.p+"static/media/fav.fa53f179.svg",F=a.p+"static/media/nonfavorite.c89e8685.svg",I=a(75),w=a(242),k=a(106),C=a(107).create({baseURL:"https://my-json-server.typicode.com/RomanChasovitin/demo-api/"}),A={users:[],favorites:[]},E=function(e){return{type:"GET_USERS",users:e}},B=function(e){return{type:"REMOVE_FAVORITE",favorite:e}},T=function(e){return{type:"SET_FAVORITES_FROM_LS",favorites:e}},R=function(e){return function(t){t(function(e){return{type:"GET_FAVORITES",favorite:e}}(e))}},D=Object(h.c)({usersData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(b.a)(Object(b.a)({},e),{},{users:t.users});case"GET_FAVORITES":return Object(b.a)(Object(b.a)({},e),{},{favorites:[].concat(Object(I.a)(e.favorites),[t.favorite])});case"REMOVE_FAVORITE":return Object(b.a)(Object(b.a)({},e),{},{favorites:e.favorites.length>1?e.favorites.filter((function(e){return e.id!==t.favorite.id})):[]});case"SET_FAVORITES_FROM_LS":return Object(b.a)(Object(b.a)({},e),{},{favorites:Object(I.a)(t.favorites)});default:return e}},form:w.a}),H=Object(h.e)(D,Object(h.a)(k.a));window.store=H;var U=H,J=a(109),L=a(72),V=a.n(L),G=["input","meta"],M=function(e){var t=e.input,a=e.meta,s=Object(J.a)(e,G),r=a.error;return Object(j.jsxs)("div",{className:V.a.formControl+" "+(r?V.a.error:""),children:[Object(j.jsxs)("div",{children:[" ",Object(j.jsx)("input",Object(b.a)(Object(b.a)(Object(b.a)({type:"text"},t),s),{},{autoComplete:"off"}))," "]}),r&&Object(j.jsx)("span",{children:a.error})]})},z=function(e){if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(e)&&e)return"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"},W=function(e){if(!/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/i.test(e)&&e)return"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"},X=Object(_.a)({form:"contactDetails"})((function(e){var t=function(){var t=Object(v.a)(d.a.mark((function t(a){var s,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={firstName:a.firstName||e.user.firstName,lastName:a.lastName||e.user.lastName,city:a.city||e.user.city,country:a.country||e.user.country,phoneNumber:a.phoneNumber||e.user.phoneNumber,email:a.email||e.user.email,website:a.website||e.user.website},(r=e.users.filter((function(t){return t.id!==e.user.id}))).push(Object(b.a)(Object(b.a)({},e.user),s)),r.sort((function(e,t){return e.id-t.id})),t.next=6,e.setUsers(r);case 6:for(c in localStorage.setItem("contacts",JSON.stringify(r)),a)a[c]="";case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:y.a.contactForms,children:Object(j.jsxs)("form",{onSubmit:e.handleSubmit(t),children:[Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"First Name:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"firstName",component:M,type:"text",placeholder:e.user.firstName})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"Last name:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"lastName",component:M,type:"text",placeholder:e.user.lastName})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"City:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"city",component:M,type:"text",placeholder:e.user.city})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"Country:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"country",component:M,type:"text",placeholder:e.user.country})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"Phone Number:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"phoneNumber",component:M,type:"text",placeholder:e.user.phoneNumber,validate:[W]})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"Email:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"email",component:M,type:"text",placeholder:e.user.email,validate:[z]})]}),Object(j.jsxs)("div",{className:y.a.inputBlock,children:[Object(j.jsx)("p",{className:y.a.inputTitle,children:"Website:"}),Object(j.jsx)(N.a,{className:y.a.contactInput,name:"website",component:M,type:"text",placeholder:e.user.website})]}),Object(j.jsx)("button",{className:y.a.saveContact,children:"Save Contact"})]})})})),P=Object(h.d)(O.e,Object(x.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{addToFavorites:R,removeFavorite:B,setUsers:E,setFavoritesFromLS:T}))((function(e){var t=Object(s.useState)(),a=Object(f.a)(t,2),r=a[0],c=a[1];Object(s.useEffect)((function(){!e.favorites.length&&JSON.parse(localStorage.getItem("favorites")).length&&e.setFavoritesFromLS(JSON.parse(localStorage.getItem("favorites")))}),[]);var n=Object(s.useRef)();n.current=e.favorites,Object(s.useEffect)((function(){c(e.match.params.userId)}),[]);var i=function(){var t=Object(v.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.favorites.some((function(e){return e.id===a.id}))){t.next=5;break}return t.next=3,e.addToFavorites(a);case 3:t.next=7;break;case 5:return t.next=7,e.removeFavorite(a);case 7:localStorage.setItem("favorites",JSON.stringify(n.current));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:y.a.contact,children:e.users.map((function(t){if(t.id===+r)return Object(j.jsxs)("div",{className:y.a.ContactDetail,children:[Object(j.jsxs)("div",{className:y.a.imgBlock,children:[Object(j.jsx)("img",{src:t.image,alt:"profile",className:y.a.photo}),Object(j.jsx)("img",{src:e.favorites.length&&e.favorites.some((function(e){return e.id===t.id}))?S:F,onClick:function(){return i(t)},alt:"fav",className:y.a.favIcon})]}),Object(j.jsx)(X,{user:t,users:e.users,setUsers:e.setUsers})]},t.id)}))})})),Z=a(7),$=a.n(Z),q=a.p+"static/media/email.f052d961.svg",K=a.p+"static/media/internet.6c063cec.svg",Q=a.p+"static/media/location.894d4136.svg",Y=a.p+"static/media/phone.e43acd22.svg",ee=a.p+"static/media/sortASC.186c0b66.svg",te=a.p+"static/media/sortDESC.55fc2b08.svg",ae=function(e){var t=e.users,a=e.setFavorites,s=e.isFavorites,r=e.favorites;return(s?r:t).map((function(e){return Object(j.jsxs)("div",{className:$.a.contactItem,children:[Object(j.jsx)("div",{className:$.a.photo,children:Object(j.jsx)("img",{src:e.image,alt:"profile"})}),Object(j.jsxs)("div",{className:$.a.textInfo,children:[Object(j.jsxs)("p",{className:$.a.name,children:[e.firstName," ",e.lastName,Object(j.jsx)("span",{className:$.a.favorite,onClick:function(){return a(e)},children:Object(j.jsx)("img",{src:r.length&&r.some((function(t){return t.id===e.id}))?S:F,alt:"favorite"})})]}),Object(j.jsxs)("p",{className:$.a.location,children:[Object(j.jsx)("img",{className:$.a.icon,src:Q,alt:"icon"}),e.city," city, ",e.country]}),Object(j.jsxs)("p",{className:$.a.number,children:[Object(j.jsx)("img",{className:$.a.icon,src:Y,alt:"icon"}),e.phoneNumber]}),Object(j.jsxs)("p",{className:$.a.website,children:[Object(j.jsx)("img",{className:$.a.icon,src:K,alt:"icon"}),e.website]}),Object(j.jsxs)("p",{className:$.a.email,children:[Object(j.jsx)("img",{className:$.a.icon,src:q,alt:"icon"}),e.email]}),Object(j.jsx)("div",{className:$.a.btnBlock,children:Object(j.jsx)(l.b,{to:"/contact/".concat(e.id),className:$.a.showUser,children:"Show"})})]})]},e.id)}))},se=Object(x.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{addToFavorites:R,removeFavorite:B,setFavoritesFromLS:T,setUsers:E})((function(e){var t=e.users,a=e.favorites,r=e.setFavoritesFromLS,c=e.addToFavorites,n=e.removeFavorite,i=e.setUsers,o=Object(s.useState)(),u=Object(f.a)(o,2),l=u[0],m=u[1],p=Object(s.useState)(!1),b=Object(f.a)(p,2),O=b[0],h=b[1],x=Object(s.useRef)();x.current=a;var N=Object(s.useReducer)((function(e){return e+1}),0),_=Object(f.a)(N,2),g=(_[0],_[1]);Object(s.useEffect)((function(){!a.length&&JSON.parse(localStorage.getItem("favorites")).length&&r(JSON.parse(localStorage.getItem("favorites")))}),[a,r]);var y=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.some((function(e){return e.id===t.id}))){e.next=5;break}return e.next=3,c(t);case 3:e.next=7;break;case 5:return e.next=7,n(t);case 7:localStorage.setItem("favorites",JSON.stringify(x.current));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(d.a.mark((function e(a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sort((function(e,t){if(a){if(e.firstName<t.firstName)return-1;if(t.firstName<e.firstName)return 1}else{if(e.firstName>t.firstName)return-1;if(t.firstName>e.firstName)return 1}}));case 2:s=e.sent,i(s),g();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:$.a.contactsBlock,children:[Object(j.jsxs)("div",{className:$.a.actionBars,children:[Object(j.jsx)("div",{className:$.a.search,children:Object(j.jsx)("input",{type:"text",className:$.a.searchInput,onChange:function(e){return function(e){m(t.filter((function(t){var a=t.firstName+" "+t.lastName,s=t.lastName+" "+t.firstName;return-1!==a.toLowerCase().search(e.target.value.toLowerCase())||-1!==s.toLowerCase().search(e.target.value.toLowerCase())})))}(e)},placeholder:"type to search..."})}),Object(j.jsxs)("div",{className:$.a.actionButtons,children:[Object(j.jsx)("span",{className:$.a.favoritesFilter,onClick:function(){return h(!O)},children:Object(j.jsx)("img",{src:O?S:F,alt:"Favorites"})}),Object(j.jsx)("span",{onClick:function(){return I(!0)},children:Object(j.jsx)("img",{src:ee,alt:"az sort"})}),Object(j.jsx)("span",{onClick:function(){return I(!1)},children:Object(j.jsx)("img",{src:te,alt:"za sort"})})]})]}),Object(j.jsx)("div",{className:$.a.contacts,children:l?Object(j.jsx)(ae,{users:l,setFavorites:y,isFavorites:O,favorites:a}):Object(j.jsx)(ae,{users:t,setFavorites:y,isFavorites:O,favorites:a})})]})})),re=r.a.memo((function(e){var t=e.setUsers,a=e.getUsers,r=e.users;return null==localStorage.getItem("favorites")&&localStorage.setItem("favorites",JSON.stringify([])),Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("contacts"));e?t(e):a()}),[t,a]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(m,{}),Object(j.jsx)("div",{className:"main",children:Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)(O.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(se,{users:r})}}),Object(j.jsx)(O.a,{path:"/contact/:userId",render:function(){return Object(j.jsx)(P,{})}})]})})]})})),ce=Object(x.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{getUsers:function(){return function(e){C.get("users").then((function(t){e(E(t.data.data)),localStorage.setItem("contacts",JSON.stringify(t.data.data))}))}},setUsers:E})(re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(l.a,{children:Object(j.jsx)(x.a,{store:U,children:Object(j.jsx)(ce,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports={imgBlock:"ContactDetail_imgBlock__lPrXq",photo:"ContactDetail_photo__14hsT",favIcon:"ContactDetail_favIcon__3soRg",contactForms:"ContactDetail_contactForms__2_84g",contactInput:"ContactDetail_contactInput__1xNa3",saveContact:"ContactDetail_saveContact__2MiRm"}},7:function(e,t,a){e.exports={contacts:"AppHeader_contacts__35R7t",contactItem:"AppHeader_contactItem__-8kau",textInfo:"AppHeader_textInfo__36BNf",name:"AppHeader_name__1J3wb",photo:"AppHeader_photo__2ydy5",icon:"AppHeader_icon__3rkcU",favorite:"AppHeader_favorite__12LWW",btnBlock:"AppHeader_btnBlock__X2wX7",showUser:"AppHeader_showUser__1FA9J",actionBars:"AppHeader_actionBars__DNXi6",search:"AppHeader_search__24yzo",searchInput:"AppHeader_searchInput__Gc3Kg",actionButtons:"AppHeader_actionButtons__13GEJ",favoritesFilter:"AppHeader_favoritesFilter__32P6R",sortBtn:"AppHeader_sortBtn__NGQJF"}},72:function(e,t,a){e.exports={error:"FormControls_error__24y5C"}}},[[239,1,2]]]);
//# sourceMappingURL=main.4ab40e8b.chunk.js.map